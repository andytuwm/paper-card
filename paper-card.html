<link rel="import" href="../paper-shadow/paper-shadow.html">

<polymer-element name="paper-card">
<template>

  <style>

    :host {
      display: block;
      font-family: "Roboto", sans-serif;
      font-weight: 300;
    }

    #pcard {
      margin: 0;
      background-color:#FFFFFF;
      border-radius:4px;
      color:#000000;
      border:1px solid #F2F2F2;
      padding:0px;
      text-align:left;
      width: 100%;
      height: 100%;
    }

    #shaded {
      opacity: 0;
      display: block;
      z-index: 1;
      border-radius:4px;
      position: absolute;
      padding:0;
      margin:0;
      width: 100%;
      height: 100%;
      top: 0;
      left :0;
      background: rgba(0,0,0,0.2);
    }

    @-webkit-keyframes addOverlay {
      to {
        opacity: 1;
      }
    }

    @-webkit-keyframes removeOverlay {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }

    .overlay-in {
      -webkit-animation: addOverlay 0.2s ease-in 1 forwards;
    }
    .overlay-out {
      -webkit-animation: removeOverlay 0.2s ease-out 1 forwards;
    }

  </style>

  <template if="{{enableHover && !enableOverlay}}">
    <paper-shadow z="{{zdepth}}" id="pcard" animated="{{animated}}"
    on-mouseover="{{hovered}}" on-mouseout="{{unHovered}}">
      <content></content>
    </paper-shadow>
  </template>

  <template if="{{!enableHover && !enableOverlay}}">
    <paper-shadow z="{{zdepth}}" id="pcard" animated="{{animated}}">
      <content></content>
    </paper-shadow>
  </template>

  <template if="{{enableHover && enableOverlay}}">
    <paper-shadow z="{{zdepth}}" id="pcard" animated="{{animated}}"
    on-mouseover="{{hovered}}" on-mouseout="{{unHovered}}">
      <div id="shaded"></div>
      <content></content>
    </paper-shadow>
  </template>

  <template if="{{!enableHover && enableOverlay}}">
    <paper-shadow z="{{zdepth}}" id="pcard" animated="{{animated}}"
    on-mouseover="{{hovered}}" on-mouseout="{{unHovered}}">
      <div id="shaded"></div>
      <content></content>
    </paper-shadow>
  </template>

</template>
<script>

  Polymer('paper-card', {

    publish: {

      /**
       * Amount of shadow of the card.
       *
       * @attribute zdepth
       * @type int
       * @default 1
       */
      zdepth: 1,

       /**
       * Increase shadow by 1 on mouse hover, if possible.
       *
       * @attribute enableHover
       * @type boolean
       * @default false
       */
      enableHover: false,

      /**
       * Animate the shadow increase/decrease from hovering
       *
       * @attribute animated
       * @type boolean
       * @default true
       */
      animated: true,

      /**
       * Enable an animated overlay on hover
       *
       * @attribute enableOverlay
       * @type boolean
       * @default false
       */
      enableOverlay: false,

      /**
       * On-hover function
       * @method hovered
       */
      hovered: function() {
        if ( this.enableOverlay) {
          if( this.enableHover && this.zdepth < 5) {
            this.$.pcard.setZ(this.zdepth + 1);
          }
          this.$.shaded.className = 'overlay-in';
        } else if( this.enableHover ) {
          if( this.zdepth < 5) {
            this.$.pcard.setZ(this.zdepth + 1);
          }
        }
      },

      /**
       * On-unhover function
       * @method unHovered
       */
      unHovered: function() {
        if ( this.enableOverlay) {
          if( this.enableHover && this.zdepth > 0) {
            this.$.pcard.setZ(this.zdepth - 1);
          }
          this.$.shaded.className = 'overlay-out';
        } else if( this.enableHover ) {
          if( this.zdepth > 0) {
            this.$.pcard.setZ(this.zdepth - 1);
          }
        }
      }


    }
});

</script>
</polymer-element>
